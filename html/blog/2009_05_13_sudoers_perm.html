<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>sudoers file with restricted permissions | Another Life Form
</title>
  <link rel="canonical" href="http://mfactor.sdf.org/blog/2009_05_13_sudoers_perm.html">

  <link rel="alternate" type="application/atom+xml" href="http://mfactor.sdf.org/blog/feeds/all.atom.xml" title="Full Atom Feed">
  <link rel="alternate" type="application/atom+xml" href="http://mfactor.sdf.org/blog/feeds/debian.atom.xml" title="Categories Atom Feed">


  <link rel="stylesheet" href="http://mfactor.sdf.org/blog/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://mfactor.sdf.org/blog/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://mfactor.sdf.org/blog/theme/css/pygments/monokai.min.css">
  <link rel="stylesheet" href="http://mfactor.sdf.org/blog/theme/css/style.css">


<meta name="description" content="O acesso ao sudo é uma ferramenta bem poderosa no linux, mas que geralmente é mal usada, permitindo que qualquer comando possa ser feito com sudo, o que é um risco de segurança. O ideal é que os usuários tenham acesso root a nada, ou a somente os comandos realmente …">
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1 class="title"><a href="http://mfactor.sdf.org/blog">Another Life Form</a></h1>
          <p class="text-muted">Science, Data Science and Python</p>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="https://br.linkedin.com/in/ispmarin/en" target="_blank">linkedin</a></li>
            <li class="list-inline-item"><a href="https://github.com/ispmarin" target="_blank">github</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>sudoers file with restricted&nbsp;permissions
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2009-05-13T18:10:00-03:00">
        <i class="fa fa-clock-o"></i>
        qua 13 maio 2009
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="http://mfactor.sdf.org/blog/category/debian.html">debian</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="http://mfactor.sdf.org/blog/author/ivan-marin.html">Ivan Marin</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="http://mfactor.sdf.org/blog/tag/config.html">#config</a>,         <a href="http://mfactor.sdf.org/blog/tag/debian.html">#debian</a>,         <a href="http://mfactor.sdf.org/blog/tag/sudo.html">#sudo</a>      </li>
    </ul>
  </header>
  <div class="content">
    <p>O acesso ao sudo é uma ferramenta bem poderosa no linux, mas que
geralmente é mal usada, permitindo que qualquer comando possa ser feito
com sudo, o que é um risco de segurança. O ideal é que os usuários
tenham acesso root a nada, ou a somente os comandos <em>realmente</em>
necessários. Aqui no <span class="caps">LHC</span> temos um novo aluno que está montando a
plataforma web dos dados de campo. Ele vai precisar acesso ao apache2 e
ao mysql. Para isso, o /etc/sudoers foi configurado da seguinte forma:#&nbsp;/etc/sudoers</p>
<pre class="literal-block">
#
# This file MUST be edited with the 'visudo' command as root.
#
# See the man page for details on how to write a sudoers file.
#

Defaults&nbsp;&nbsp; &nbsp;env_reset

# Host alias specification

# User alias specification

# Cmnd alias specification
Cmnd_Alias APACHE_START = /etc/init.d/apache2 start
Cmnd_Alias APACHE_STOP = /etc/init.d/apache2 stop
Cmnd_Alias APACHE_RESTART = /etc/init.d/apache2 restart
Cmnd_Alias MYSQL = /usr/bin/mysql
# User privilege specification
root&nbsp;&nbsp; &nbsp;ALL=(ALL) ALL
ispmarin ALL=(ALL) NOPASSWD:ALL
pucciarelli ALL=APACHE_START, APACHE_STOP,APACHE_RESTART,MYSQL
# Uncomment to allow members of group sudo to not need a password
# (Note that later entries override this, so you might need to move
# it further down)
# %sudo ALL=NOPASSWD: ALL
</pre>
<p>O que permite que o usuário só acesse esses comandos,&nbsp; o que é&nbsp;excelente.</p>
<p>Edit 23/05: está funcionando a contento. O usuário está conseguindo
trabalhar corretamente com o Drupal na isengard sem precisar de mais
acesso ao sistema, o que é ótimo, pois a isengard é a minha máquina de
trabalho diário e meu servidor de&nbsp;arquivos.</p>

  </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="http://mfactor.sdf.org/blog/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="http://mfactor.sdf.org/blog/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="http://mfactor.sdf.org/blog/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="http://mfactor.sdf.org/blog/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>